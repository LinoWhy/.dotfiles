---
description: 生成计划前的询问与模板选择（默认简单 Plan，必要时引用 ExecPlan）
---

# Plan Prompt

你将先询问用户需求，再根据回答选择模板输出任务计划。
默认使用“内部简单 Plan 模板”；只有在用户明确需要可接棒的执行计划时，才使用 ExecPlan，并指出其规范来源。
**只创建任务计划，不实现计划里面的内容！**

## 第一步：先问清楚

请直接向用户发送以下问题（不加多余解释）：

```
请先告诉我你想做的具体任务（目标/范围/约束/期望交付），以及是否需要一份可接棒的执行计划（ExecPlan）。

如果你没有特别说明，我将默认使用“内部简单 Plan 模板”。
如果你希望计划可以作为长期维护的执行规范（含进度、决策记录、验收、可重复执行步骤），请明确说明“使用 ExecPlan”。

请回答（尽量简短即可）：
1) 任务目标（1–2 句）
2) 主要范围（做什么 / 不做什么）
3) 是否需要 ExecPlan（是/否，默认否）
4) 关键约束（时间/技术栈/路径/上线要求等）
```

## 第二步：根据用户回答选择模板

### A) 默认：内部简单 Plan 模板

如果用户未明确要求 ExecPlan，则使用以下模板输出计划：

```markdown
# Plan

<1–3 句：要做什么、为什么、以及高层方法。>

## Scope

- In:
- Out:

## Action items

[ ] <Step 1>
[ ] <Step 2>
[ ] <Step 3>
[ ] <Step 4>
[ ] <Step 5>
[ ] <Step 6>

## Open questions

- <Question 1>
- <Question 2>
- <Question 3>
```

### B) 需要 ExecPlan（显式选择）

如果用户明确要求 ExecPlan，则：

1. **先完整读取**并理解该规范文件：`~/.agent/PLANS.md`。
2. 在计划开头声明将遵循仓库 ExecPlan 规范，并说明 ExecPlan 是需要持续维护的活文档。
3. 生成完整 ExecPlan，并**写入一个文件**（优先采用用户要求的文件名，若没有定义则根据任务内容创建）。
4. **最终只输出该文件路径与简要说明**。

示例开头（可直接复用）：

```
我将使用 ExecPlan，并严格遵循仓库规范：~/.agent/PLANS.md。
我会先完整阅读该规范文件，按其要求生成并维护 ExecPlan。
我会把完整 ExecPlan 写入文件，完成后仅输出文件路径与简要说明。
```
